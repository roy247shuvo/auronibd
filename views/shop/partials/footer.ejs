<footer class="bg-brand-black text-white pt-20 pb-10 border-t border-gray-800">
    <div class="max-w-[1600px] mx-auto px-6 grid grid-cols-1 md:grid-cols-4 gap-12 mb-16">
        
        <div class="md:col-span-1">
            <% if (shopSettings.shop_logo) { %>
                <img src="<%= shopSettings.shop_logo %>" alt="<%= shopSettings.shop_name %>" class="h-10 w-auto object-contain mb-6 brightness-0 invert opacity-80 hover:opacity-100 transition">
            <% } else { %>
                <h2 class="font-serif text-3xl mb-6"><%= shopSettings.shop_name || 'NICHE.' %></h2>
            <% } %>
            <p class="text-gray-400 text-sm leading-relaxed mb-6">
                Curating the finest Pakistani fashion for the modern elegant woman. 100% Original Guarantee.
            </p>
            <div class="flex space-x-4">
                <a href="https://www.facebook.com/bdnicheboutique" class="text-gray-400 hover:text-white transition"><i class="material-icons-outlined">facebook</i></a>
                <a href="#" class="text-gray-400 hover:text-white transition"><i class="material-icons-outlined">camera_alt</i></a>
            </div>
        </div>

        <div>
            <h3 class="text-xs font-bold uppercase tracking-widest mb-6 text-gray-500">Shop</h3>
            <ul class="space-y-4 text-sm text-gray-300">
                <li><a href="/shop?status=new" class="hover:text-brand-gold transition">New Arrivals</a></li>
                <li><a href="/shop?cat=brands" class="hover:text-brand-gold transition">Brands</a></li>
                <li><a href="/shop?cat=ready" class="hover:text-brand-gold transition">Ready to Wear</a></li>
                <li><a href="/shop?cat=sale" class="hover:text-brand-gold transition">Sale</a></li>
            </ul>
        </div>

        <div>
            <h3 class="text-xs font-bold uppercase tracking-widest mb-6 text-gray-500">Support</h3>
            <ul class="space-y-4 text-sm text-gray-300">
                <li><a href="/track" class="hover:text-brand-gold transition">Track Order</a></li>
                <li><a href="/shipping-policy" class="hover:text-brand-gold transition">Shipping Policy</a></li>
                <li><a href="/returns-policy" class="hover:text-brand-gold transition">Returns & Exchange</a></li>
                <li><a href="/contact" class="hover:text-brand-gold transition">Contact Us</a></li>
            </ul>
        </div>

        <div>
            <h4 class="font-serif text-lg font-bold mb-4">Stay in Touch</h4>
<p class="text-sm text-gray-400 mb-4">Subscribe to receive exclusive offers via SMS.</p>

<div x-data="{ 
    phone: '', 
    loading: false, 
    success: false, 
    submitForm() {
        if (!/^01\d{9}$/.test(this.phone)) return; 
        this.loading = true;
        
        fetch('/subscribe', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json', 'CSRF-Token': '<%= csrfToken %>' },
            body: JSON.stringify({ phone: this.phone })
        })
        .then(res => res.json())
        .then(data => {
            this.loading = false;
            if(data.success) {
                this.success = true;
                this.phone = '';
            }
        });
    }
}" class="relative">

    <div x-show="success" 
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 scale-90"
         x-transition:enter-end="opacity-100 scale-100"
         class="absolute inset-0 bg-brand-black z-10 flex items-center gap-3">
        
        <div class="animate-[spin_4s_linear_infinite]">ðŸŒ¸</div>
        <span class="text-white text-sm font-medium tracking-wide">Thank You!</span>
    </div>

    <form @submit.prevent="submitForm" class="flex border border-gray-700 rounded-lg overflow-hidden transition-colors"
          :class="{'border-red-500': phone.length > 0 && !phone.startsWith('01'), 'border-green-600': /^01\d{9}$/.test(phone)}">
        
        <input type="tel" 
               x-model="phone" 
               maxlength="11"
               placeholder="017XXXXXXXX" 
               class="bg-transparent text-white px-4 py-2.5 w-full outline-none text-sm placeholder-gray-600 font-mono tracking-wider"
               oninput="this.value = this.value.replace(/[^0-9]/g, '')">
        
        <button type="submit" 
                :disabled="!/^01\d{9}$/.test(phone) || loading"
                class="px-4 bg-white text-black font-bold uppercase text-xs tracking-widest hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
            <span x-show="!loading">Join</span>
            <span x-show="loading" class="animate-spin block w-3 h-3 border-2 border-black border-t-transparent rounded-full"></span>
        </button>
    </form>

    <p x-show="phone.length > 0 && !phone.startsWith('01')" class="text-red-500 text-[10px] mt-1 absolute">Must start with 01</p>
</div>
        </div>
    </div>

    <div class="text-center border-t border-gray-800 pt-8 text-xs text-gray-600 uppercase tracking-widest">
        &copy; 2026 Niche Boutique. All Rights Reserved.
    </div>
</footer>